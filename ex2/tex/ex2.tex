\documentclass{article}
\usepackage{graphicx} % Required for inserting images
\usepackage{amsmath}
\title{IDL Exercise 2.}
\author{David Ponarovsky}
\date{April 2025}


\newcommand{\DXX}[1]{ \frac{d}{ d #1 } }
\begin{document}

\maketitle

\section{Theoretical Questions:}

\subsection{LTI.} Show that a convolution with respect to any filter $h$ is time/space invariant.


\textbf{Solution.} Let's denote by $\mathcal{L} : \text{funcs} \rightarrow \text{funcs}$ the convolution by the filter $h$, namely $\mathcal{L}[f] = f*h = \sum_{x}{h(x)f(y-x)}$. To show that $\mathcal{L}$ is an LTI operation, we have to show that $\mathcal{L}[f(x-t)](y) = \mathcal{L}[f](y-t)$. (Note that the linearity is obtained for free by the linearity of convolution, so only the time-invariant part is left). So:
\begin{equation*}
    \begin{split}
      \mathcal{L}[f(x-t)](y) &=  f(x-t)*h = \sum_{x}{h(x)f( \overbrace{y-t}^{\tau}-x)} = \sum_{x}{h(x)f(\tau-x)}\\
      &= \mathcal{L}[f](\tau) = \mathcal{L}[f](y-t)
    \end{split}
\end{equation*}
And we got that the convolution is an LTI operation.
 
\subsection{TI.} Explain whether each of the following layers are time/space invariant or not:
\begin{enumerate}
  \item Additive constant.

    \textbf{Solution.} \textbf{TRUE.} 

\begin{equation*}
    \begin{split}
    \mathcal{L}[f] = f(x) + c \Rightarrow  \mathcal{L}[f(x-t)] = f(x-t) + c =  \mathcal{L}[f](x-t)
    \end{split}
\end{equation*}

  \item Pointwise nonlinearity (such as ReLU)

    \textbf{Solution.} \textbf{TRUE.} Since the operator acts pointwise, we can denote it by $\mathcal{L}[f](x) = g(f(x))$. Here we think of the input $x$ as the coordinate (that's consistent with the definition of the convolution from the lecture). Now:
  \begin{equation*}
    \begin{split}
      \Rightarrow  \mathcal{L}[f(x-t)] = g(f(x-t))  =  \mathcal{L}[f](x-t)
    \end{split}
\end{equation*}
  \item Strided pooling by a factor $ > 1 $


    \textbf{Solution.} \textbf{FALSE.} Consider the $2$-factor pooling, namely $\mathcal{L}[f](x) = f(2x)$, (equivalent to taking only the even coordinates). Now consider the action of shifting the function $f$ by a single time unit, The pooling gives only the odd coordinates, namely:
  \begin{equation*}
    \begin{split}
    \mathcal{L}[f(x+1)] = f(2x+1) \neq \mathcal{L}[f](x+1)= f(2x + 2)
    \end{split}
\end{equation*}
  \item As a result, is a CNN composed of all these operators (+convolution) time invariant? 
   
    
    \textbf{Solution.} \textbf{FALSE.} The pooling is not TI and therfore a CNN isn't a TI. 
\end{enumerate}

\subsection{Layersâ€™ Jacobian.} Calculate the Jacobian matrix of the following layers:

Recall the Jacobian defitnion:
  \begin{equation*}
    \begin{split}
J = \begin{bmatrix}
\frac{\partial f_1}{\partial x_1} & \frac{\partial f_1}{\partial x_2} & \cdots & \frac{\partial f_1}{\partial x_n} \\
\frac{\partial f_2}{\partial x_1} & \frac{\partial f_2}{\partial x_2} & \cdots & \frac{\partial f_2}{\partial x_n} \\
\vdots & \vdots & \ddots & \vdots \\
\frac{\partial f_m}{\partial x_1} & \frac{\partial f_m}{\partial x_2} & \cdots & \frac{\partial f_m}{\partial x_n}
\end{bmatrix}
    \end{split}
\end{equation*}

\begin{enumerate}
  \item Additive bias vector 

    \textbf{Solution.} In that case $f_i(x) = x_{i} + b_{i}$ and therefore: 
  \begin{equation*}
    \begin{split}
      \frac{\partial f_i}{\partial x_j} = \frac{\partial }{\partial x_j} \left( x_{i} + b_{i} \right) = \begin{cases} 1 & \text{if } i = j \\ 0 & \text{else}  \end{cases}
    \end{split}
\end{equation*}
  \item General Matrix multiplication


    \textbf{Solution.} In that case $f_i(x) = \sum_{k}{A_{ik}x_{k}}$ and therefore: 
  \begin{equation*}
    \begin{split}
    \frac{\partial f_i}{\partial x_j} = \frac{\partial }{\partial x_j} \left(\sum_{k}{A_{ik}x_{k}} \right) = A_{ij} \Rightarrow J = A
    \end{split}
\end{equation*}
  \item Convolution layer
    

    \textbf{Solution.} By the previous section and since convolution is just a multiplication by all the cyclic shifts of a vector (namely a matrix whose first row is $h$, the second is $h$ shifted to the right, and so on), we get that the Jacobian will be the convolution matrix. In other words, $J_{ij}$ would be the $(i - j)$th value of the filter. Namely, if the filter is $h$, then $J_{ij} = h_{i-j}$.
\end{enumerate}



\end{document}

